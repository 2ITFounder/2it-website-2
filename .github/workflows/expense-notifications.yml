name: Expense notifications

on:
  schedule:
    # Copre ora legale/solare: una delle due corrisponder√† alle 09:05 Europe/Rome
    - cron: "5 7 * * *"
    - cron: "5 8 * * *"
  workflow_dispatch: {}

jobs:
  run:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Call Vercel endpoint
        run: |
          echo "Calling ${{ secrets.NOTIFICATIONS_RUN_URL }}"
          curl -sS -X POST "${{ secrets.NOTIFICATIONS_RUN_URL }}" \
            -H "x-expense-secret: ${{ secrets.EXPENSE_NOTIFICATIONS_SECRET }}" \
            -H "x-force-run: 1" \
            -H "content-type: application/json" \
            -w "\nHTTP_STATUS=%{http_code}\n"

